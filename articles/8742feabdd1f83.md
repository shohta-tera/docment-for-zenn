---
title: "ä½æ‰€ã®è¡¨è¨˜æ–¹æ³•ã«ã‚ˆã‚‹ç·¯åº¦çµŒåº¦ã®è§£æ±ºã®ãƒ–ãƒ¬ã‚’ãªãã™"
emoji: "ğŸ˜½"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python", "GoogleMaps"]
published: false
---


# ã¯ã˜ã‚ã«

ä½æ‰€ã‹ã‚‰ç·¯åº¦çµŒåº¦ã‚’è§£æ±ºã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ§‹ç¯‰ä¸­ã«ã€ä½æ‰€ã®è¡¨è¨˜æ–¹æ³•ã«ã‚ˆã£ã¦ç·¯åº¦çµŒåº¦ã‚’è§£æ±ºã™ã‚‹æ­£ç¢ºã•ã«ãƒ–ãƒ¬ãŒç”Ÿã˜ã‚‹ã“ã¨ã‚’è¦‹ã¤ã‘ãŸã®ã§ã€ç·¯åº¦çµŒåº¦ã‚’æ­£ç¢ºã«ã™ã‚‹ãŸã‚ã®ä½æ‰€ã®è¡¨ç¾æ–¹æ³•ã«ã¤ã„ã¦ã€ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚  

ä½æ‰€ã‹ã‚‰ã€ç·¯åº¦çµŒåº¦ã‚’è§£æ±ºã™ã‚‹éš›ã«ã¯ã€Google Mapsã®Geocoding APIã‚’ä½¿ç”¨ã—ã¾ã™ã€‚  

## ç’°å¢ƒ

- python: 3.8
- googlemaps: 4.6.0

## Google Maps API Keyã®æº–å‚™

1. GCPã®APIã®æœ‰åŠ¹åŒ–ã‹ã‚‰ã€`Geocoding API`ã‚’æ¤œç´¢ã—ã€æœ‰åŠ¹åŒ–ã—ã¾ã™
2. èªè¨¼æƒ…å ±ã‹ã‚‰ã€APIã‚­ãƒ¼ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã®ã¨ãã€åˆ¶é™ã¨ã—ã¦Geocoding APIã—ã‹å‘¼ã³å‡ºã›ãªã„ã‚ˆã†ã«åˆ¶é™ã—ã¦ãŠãã¾ã™

## GeocodingAPIã®ä½¿ã„æ–¹

```python
import googlemaps
gmaps = googlemaps.Clinet(key="ç”Ÿæˆã—ãŸAPIKey")
geocode_result = gmaps.geocode("å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºå¤§æ·±ç”º4-20")
```

*çµæœ*
```
{
    "address_components": [
        {
            "long_name": "20",
            "short_name": "20",
            "types": [
                "premise"
            ]
        },
        {
            "long_name": "4",
            "short_name": "4",
            "types": [
                "political",
                "sublocality",
                "sublocality_level_4"
            ]
        },
        {
            "long_name": "\u014cfukach\u014d",
            "short_name": "\u014cfukach\u014d",
            "types": [
                "political",
                "sublocality",
                "sublocality_level_2"
            ]
        },
        {
            "long_name": "Kita Ward",
            "short_name": "Kita Ward",
            "types": [
                "political",
                "sublocality",
                "sublocality_level_1"
            ]
        },
        {
            "long_name": "Osaka",
            "short_name": "Osaka",
            "types": [
                "locality",
                "political"
            ]
        },
        {
            "long_name": "Osaka",
            "short_name": "Osaka",
            "types": [
                "administrative_area_level_1",
                "political"
            ]
        },
        {
            "long_name": "Japan",
            "short_name": "JP",
            "types": [
                "country",
                "political"
            ]
        },
        {
            "long_name": "530-0011",
            "short_name": "530-0011",
            "types": [
                "postal_code"
            ]
        }
    ],
    "formatted_address": "4-20 \u014cfukach\u014d, Kita Ward, Osaka, 530-0011, Japan",
    "geometry": {
        "location": {
            "lat": 34.7042545,
            "lng": 135.4947402
        },
        "location_type": "ROOFTOP",
        "viewport": {
            "northeast": {
                "lat": 34.70587048029149,
                "lng": 135.4960475802915
            },
            "southwest": {
                "lat": 34.7031725197085,
                "lng": 135.4933496197085
            }
        }
    },
    "place_id": "ChIJseRhe47mAGARLKvXhxx0TLM",
    "plus_code": {
        "compound_code": "PF3V+PV Osaka, Japan",
        "global_code": "8Q6QPF3V+PV"
    },
    "types": [
        "street_address"
    ]
}
```

ä¸Šè¨˜çµæœã®ä¸­ã§ã€é‡è¦ãªã®ã¯"geometry"ã®"location_type"ã§ã™ã€‚ã“ã¡ã‚‰ã§ã€è§£æ±ºã•ã‚ŒãŸä½æ‰€ã®æ­£ç¢ºæ€§ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚  
[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes)ã«ã‚ˆã‚‹ã¨ã€ï¼”ç¨®é¡ã§ä¸€ç•ªæ­£ç¢ºãªã®ãŒ`Rooftop`ã§ã™ã€‚  

æ‰±ã†ä½æ‰€ãŒæ—¥æœ¬ã ã‘ã®å ´åˆã¯ç‰¹ã«å•é¡Œãªã„ã®ã§ã€GeocodingAPIã‚’ãã®ã¾ã¾ä½¿ç”¨ã§ãã¾ã™ã€‚  
æ—¥æœ¬ä»¥å¤–ã®ä¸–ç•Œä¸­ã«ãªã‚‹ã¨ã€ã‚„ã£ã‹ã„ã§ã™ã€‚